{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/scypion/Programing/Java_Projects/My_Projects/holiday_scheduler/frontend/src/componenets/tableControls.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport \"../styles/style.css\";\n\nconst TableControls = ({\n  header,\n  pagination,\n  setPagination\n}) => {\n  _s();\n\n  const [usersCount, setUsersCount] = useState(0); // const[state, setState] = useState({\n  //     //FIXME pagination drops sortBy param here\n  //     filter: \"\", pageNum: 1, pageSize: 5,  sortOrder: \"ASC\"\n  // })\n\n  useEffect(() => getUsersCount(), []);\n\n  function handleChange(event) {\n    const value = event.target.value;\n\n    if (event.target.name === 'filter') {\n      console.log(\"filter\");\n      setTimeout(setPagination({ ...pagination,\n        'filter': value\n      }), 2000);\n    }\n\n    setPagination({ ...pagination,\n      [event.target.name]: value\n    });\n  }\n\n  const getUsersCount = async () => {\n    const response = await axios.get(\"http://localhost:8080/api/values/user/count\");\n    const {\n      data\n    } = await response;\n    setUsersCount(data);\n  };\n\n  const renderPageNumControls = () => {\n    var pageS = [];\n    var i = 0;\n    var max = usersCount / pagination.pageSize;\n\n    if (usersCount != 0) {\n      for (i = 0; i <= max; i++) {\n        pageS.push(i + 1);\n      }\n    }\n\n    return pageS.map((num, index) => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        className: \"controlElement\",\n        children: num\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  const renderPageSizeControls = () => {\n    var pageS = [];\n    var i = 0;\n\n    if (usersCount != 0) {\n      for (i; i <= 25; i = i + 5) {\n        if (usersCount > i * pagination.pageNum) {\n          pageS.push(i + 5);\n        }\n      }\n    }\n\n    return pageS.map((num, index) => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        className: \"controlElement\",\n        children: num\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"controlsWrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pageHeader\",\n      children: header\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controlsElementsWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"filter\",\n        className: \"filterBar\",\n        placeholder: \"Filter results\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"controlsLabels\",\n        children: [\"Page:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"pageNum\",\n          className: \"controlsElements\",\n          onChange: handleChange,\n          children: renderPageNumControls()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"controlsLabels\",\n        children: [\"Size:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"pageSize\",\n          className: \"controlsElements\",\n          onChange: handleChange,\n          children: renderPageSizeControls()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"controlsLabels\",\n        children: [\"Order:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"sortOrder\",\n          className: \"controlsElements\",\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"ASC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"DESC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TableControls, \"JIwYg8mali7BEh1n+IeFwBba4QI=\");\n\n_c = TableControls;\nexport default TableControls;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableControls\");","map":{"version":3,"sources":["/home/scypion/Programing/Java_Projects/My_Projects/holiday_scheduler/frontend/src/componenets/tableControls.js"],"names":["axios","React","useEffect","useState","TableControls","header","pagination","setPagination","usersCount","setUsersCount","getUsersCount","handleChange","event","value","target","name","console","log","setTimeout","response","get","data","renderPageNumControls","pageS","i","max","pageSize","push","map","num","index","renderPageSizeControls","pageNum"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, {useEffect, useState} from \"react\";\nimport \"../styles/style.css\"\n\nconst TableControls = ({header, pagination, setPagination}) => {\n\n    const[usersCount, setUsersCount] = useState(0)\n    // const[state, setState] = useState({\n    //     //FIXME pagination drops sortBy param here\n    //     filter: \"\", pageNum: 1, pageSize: 5,  sortOrder: \"ASC\"\n    // })\n\n    useEffect(() => getUsersCount(), [])\n\n    function handleChange(event) {\n        const value = event.target.value;\n\n        if(event.target.name==='filter'){\n            console.log(\"filter\")\n            setTimeout(setPagination({... pagination, 'filter': value}), 2000)\n        }\n        setPagination({\n            ...pagination,\n            [event.target.name]: value\n        });\n    }\n\n\n    const getUsersCount = async () => {\n        const response = await axios.get(\"http://localhost:8080/api/values/user/count\")\n        const { data } = await response;\n        setUsersCount(data);\n    }\n\n    const renderPageNumControls = () => {\n\n        var pageS = [];\n        var i = 0;\n        var max = usersCount / pagination.pageSize ;\n\n        if(usersCount!=0){\n            for(i = 0; i <= max; i++){\n                pageS.push(i+1)\n            }\n        }\n\n        return( pageS.map((num, index) => {\n            return (\n                <option \n                    className=\"controlElement\"\n                    key={index}    \n                >  \n                    {num}\n                </option>\n            )})\n        )\n    }\n\n    const renderPageSizeControls = () => {\n\n        var pageS = [];\n        var i = 0;\n\n        if(usersCount!=0){\n            for(i; i <= 25; i=i+5){\n                if(usersCount>i*(pagination.pageNum)){\n                    pageS.push(i+5)\n                }\n            }\n        }\n\n        return( pageS.map((num, index) => {\n            return (\n                <option \n                    className=\"controlElement\"\n                    key={index}\n                >  \n                    {num}\n                </option>\n            )})\n        )\n    }\n\n    return (\n        <form className=\"controlsWrapper\">\n            <div className=\"pageHeader\">{header}</div>\n            <div className=\"controlsElementsWrapper\">\n                <input \n                    type=\"text\" \n                    name=\"filter\" \n                    className=\"filterBar\" \n                    placeholder=\"Filter results\" \n                    onChange={handleChange}\n                />\n\n                <label \n                    className=\"controlsLabels\">\n                        Page:\n                        <select \n                            name=\"pageNum\" \n                            className=\"controlsElements\"\n                            onChange={handleChange}\n                        >\n                            {renderPageNumControls()}\n                        </select>\n                </label>\n\n                <label \n                    className=\"controlsLabels\">\n                        Size: \n                        <select \n                            name=\"pageSize\" \n                            className=\"controlsElements\"\n                            onChange={handleChange}\n                        >\n                            {renderPageSizeControls()}\n                        </select> \n                </label>\n\n                <label \n                    className=\"controlsLabels\">\n                        Order: \n                        <select \n                            name=\"sortOrder\" \n                            className=\"controlsElements\"\n                            onChange={handleChange}\n                        >\n                            <option>ASC</option>\n                            <option>DESC</option>\n                        </select>\n                </label>\n            </div>\n        </form>\n        )\n} \n\nexport default TableControls;"]},"metadata":{},"sourceType":"module"}